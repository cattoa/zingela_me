class PlantCover < ActiveRecord::Base
  belongs_to :observation
  after_create do
    update_info(id)
  end
  after_update do
    update_info(id)
  end
  def update_info(id)
    last_item = PlantCover.find(id)
    case last_item.code
    when '+'
      upper_class_limit = '0.049'
      lower_class_limit = '0'
      percentage ='0.00999999977648258'
      class_interval = '0.049'
    when '1'
      upper_class_limit = '0.249'
      lower_class_limit = '0.05'
      percentage ='0.100000001490116'
      class_interval = '0.199'
    when '2'
      upper_class_limit = '0.654'
      lower_class_limit = '0.25'
      percentage ='0.400000005960464'
      class_interval = '0.404	'
    when '3'
      upper_class_limit = '1.259'
      lower_class_limit = '0.655'
      percentage ='0.910000026226044'
      class_interval = '0.613	'
    when '4'
      upper_class_limit = '2.064'
      lower_class_limit = '1.26'
      percentage ='1.61000001430511'
      class_interval = '0.804'
    when '5'
      upper_class_limit = '3.074'
      lower_class_limit = '2.065'
      percentage ='2.51999998092651'
      class_interval = '1.009'
    when '6'
      upper_class_limit = '4.284'
      lower_class_limit = '3.075'
      percentage ='3.63000011444092'
      class_interval = '1.209'
    when '7'
      upper_class_limit = '5.694'
      lower_class_limit = '4.285'
      percentage ='4.94000005722046'
      class_interval = '1.409	'
    when '8'
      upper_class_limit = '7.314'
      lower_class_limit = '5.695'
      percentage ='6.44999980926514'
      class_interval = '1.619	'
    when '9'
      upper_class_limit = '9.129'
      lower_class_limit = '7.315'
      percentage ='8.18000030517578'
      class_interval = '1.814	'
    when 'A'
      upper_class_limit = '11.139'
      lower_class_limit = '9.13'
      percentage ='10.0799999237061'
      class_interval = '2.009'
    when 'B'
      upper_class_limit = '13.354'
      lower_class_limit = '11.14'
      percentage ='12.1999998092651'
      class_interval = '2.214'
    when 'C'
      upper_class_limit = '15.769'
      lower_class_limit = '13.355'
      percentage ='14.5100002288818'
      class_interval = '2.414'
    when 'D'
      upper_class_limit = '18.389'
      lower_class_limit = '15.77'
      percentage ='17.0300006866455'
      class_interval = '2.619	'
    when 'E'
      upper_class_limit = '21.214'
      lower_class_limit = '18.39'
      percentage ='19.75'
      class_interval = '2.824'
    when 'F'
      upper_class_limit = '24.239'
      lower_class_limit = '21.215'
      percentage ='22.68'
      class_interval = '3.024'
    when 'G'
      upper_class_limit = '27.459'
      lower_class_limit = '24.24'
      percentage ='25.7999992370605'
      class_interval = '3.219'
    when 'H'
      upper_class_limit = '30.884'
      lower_class_limit = '27.46'
      percentage ='29.1200008392334'
      class_interval = '3.424'
    when 'I'
      upper_class_limit = '34.514'
      lower_class_limit = '30.885'
      percentage ='32.6500015258789'
      class_interval = '3.629'
    when 'J'
      upper_class_limit = '38.344'
      lower_class_limit = '34.515'
      percentage ='36.3800010681152'
      class_interval = '3.829'
    when 'K'
      upper_class_limit = '42.374'
      lower_class_limit = '38.345'
      percentage ='40.31'
      class_interval = '4.029'
    when 'L'
      upper_class_limit = '46.609'
      lower_class_limit = '42.375'
      percentage ='44.44'
      class_interval = '4.234'
    when 'M'
      upper_class_limit = '51.044'
      lower_class_limit = '46.61'
      percentage ='48.7799987792969'
      class_interval = '4.434'
    when 'N'
      upper_class_limit = '55.679'
      lower_class_limit = '51.045'
      percentage ='53.310001373291'
      class_interval = '4.634'
    when 'O'
      upper_class_limit = '60.519'
      lower_class_limit = '55.68'
      percentage ='58.0499992370605'
      class_interval = '4.839'
    when 'P'
      upper_class_limit = '65.559'
      lower_class_limit = '60.52'
      percentage ='62.99'
      class_interval = '5.039'
    when 'Q'
      upper_class_limit = '70.799'
      lower_class_limit = '65.56'
      percentage ='68.13'
      class_interval = '5.239'
    when 'R'
      upper_class_limit = '76.284'
      lower_class_limit = '70.8'
      percentage ='73.47'
      class_interval = '5.484	'
    when 'S'
      upper_class_limit = '81.929'
      lower_class_limit = '76.285'
      percentage ='79.1'
      class_interval = '5.644'
    when 'T'
      upper_class_limit = '87.729'
      lower_class_limit = '81.93'
      percentage ='84.76'
      class_interval = '5.799'
    when 'U'
      upper_class_limit = '93.774'
      lower_class_limit = '87.73'
      percentage ='90.7'
      class_interval = '6.044'
    when 'V'
      upper_class_limit = '98.424'
      lower_class_limit = '93.775'
      percentage ='96.85'
      class_interval = '4.649'
    when 'W'
      upper_class_limit = '100'
      lower_class_limit = '98.425'
      percentage ='100'
      class_interval = '1.575'
    else
      puts "issue"
    end
    last_item.update_column(:percentage,percentage )
    last_item.update_column(:lower_class_limit, lower_class_limit)
    last_item.update_column(:upper_class_limit,upper_class_limit )
    last_item.update_column(:class_interval,class_interval )
  end
end
